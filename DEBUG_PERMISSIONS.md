# Debug Permissions - ุฏููู ุชุชุจุน ุงููุดุงูู

## ุงูุฎุทูุงุช ููุชุญูู ูู ุงููุดููุฉ:

### 1. ุงูุชุญ Console ูู ุงููุชุตูุญ (ุงุถุบุท F12)

### 2. ุดุบู ูุฐุง ุงูููุฏ ููุชุญูู ูู ุจูุงูุงุช localStorage:

```javascript
const user = JSON.parse(localStorage.getItem('currentUser') || '{}');
console.log('๐ค Current User:', user);
console.log('๐ Permissions:', user.permissions);
console.log('๐ผ Position:', user.position);
```

### 3. ุชุญูู ูู ุงููุชุงุฆุฌ:

**ุฅุฐุง ุธูุฑ `permissions: undefined` ุฃู `permissions: []`:**
- โ ุงููุดููุฉ: ุงูุตูุงุญูุงุช ูู ุชูุญูุธ ูู localStorage
- โ ุงูุญู: ุณุฌู ุฎุฑูุฌ ุซู ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู

**ุฅุฐุง ุธูุฑ `permissions: ["delivery-orders", "confirm-orders"]` (ูุซุงู):**
- โ ุงูุตูุงุญูุงุช ููุฌูุฏุฉ ูู localStorage
- ๐ ุงููุดููุฉ ูุฏ ุชููู ูู `usePermissions` Hook

### 4. ุชุญูู ูู usePermissions:

ุงูุชุญ Console ูุงุจุญุซ ุนู ุฑุณุงุฆู ุชุจุฏุฃ ุจู:
- ๐ Loading user from localStorage
- โ Parsed user
- ๐ User permissions
- ๐ Checking permission

**ุฅุฐุง ูู ุชุธูุฑ ูุฐู ุงูุฑุณุงุฆู:**
- โ ุงููุดููุฉ: `usePermissions` ูุง ูุนูู
- โ ุงูุญู: ุชุญูู ูู ุฃู ุงูุตูุญุฉ ุชุณุชุฎุฏู `usePermissions` ุจุดูู ุตุญูุญ

**ุฅุฐุง ุธูุฑุช ุงูุฑุณุงุฆู ููู permissions ูุงุฑุบุฉ:**
- โ ุงููุดููุฉ: ุงูุตูุงุญูุงุช ูู ุชููุฑุฃ ูู localStorage
- โ ุงูุญู: ุชุญูู ูู ุตูุบุฉ ุงูุจูุงูุงุช ูู localStorage

### 5. ุงุฎุชุจุงุฑ hasPermission ูุฏููุงู:

```javascript
// ูู Console
const user = JSON.parse(localStorage.getItem('currentUser'));
const permissions = user.permissions || [];

// ุงุฎุชุจุฑ ุตูุงุญูุฉ ูุนููุฉ
const pageId = 'delivery-orders';
const hasAccess = permissions.includes(pageId);

console.log(`ูู ูุฏูู ุตูุงุญูุฉ ${pageId}?`, hasAccess);
console.log('ุฌููุน ุงูุตูุงุญูุงุช:', permissions);
```

### 6. ุฅุฐุง ูุงูุช ุงูุตูุงุญูุงุช ููุฌูุฏุฉ ููู ุงููุฑูุช ูุชุฌูุฏุฉ:

**ุชุญูู ูู OutputsManagement:**
```javascript
// ูู Consoleุ ุนูู ุตูุญุฉ OutputsManagement
// ุณุชุฑู ุฑุณุงุฆู ูุซู:
// ๐ Checking permission for "delivery-orders"
// โ Permission "delivery-orders": true
```

**ุฅุฐุง ุธูุฑ `false` ุฑุบู ูุฌูุฏ ุงูุตูุงุญูุฉ:**
- โ ุงููุดููุฉ: ุนุฏู ุชุทุงุจู ูู ุงุณู ุงูุตูุงุญูุฉ
- โ ุงูุญู: ุชุญูู ูู ุฃู `permissionId` ูู ุงููุงุฑุช ูุทุงุจู ููุตูุงุญูุฉ ุงููุญููุธุฉ

## ุงูุญููู ุงูุณุฑูุนุฉ:

### ุงูุญู 1: ุฅุนุงุฏุฉ ุชุณุฌูู ุงูุฏุฎูู
```
1. ุงุถุบุท ุชุณุฌูู ุฎุฑูุฌ
2. ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
3. ุชุญูู ูู Console
```

### ุงูุญู 2: ูุณุญ localStorage ูุฅุนุงุฏุฉ ุงููุญุงููุฉ
```javascript
// ูู Console
localStorage.clear();
location.reload();
// ุซู ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
```

### ุงูุญู 3: ุชุญุฏูุซ ุงูุตูุงุญูุงุช ูุฏููุงู
```javascript
// ูู Console
const user = JSON.parse(localStorage.getItem('currentUser'));
user.permissions = ['delivery-orders', 'confirm-orders', 'completed-orders'];
localStorage.setItem('currentUser', JSON.stringify(user));
window.dispatchEvent(new Event('localStorageUpdated'));
location.reload();
```

## ุงูุชุญูู ูู Firestore:

### ุฅุฐุง ุงููุดููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

1. ุงุฐูุจ ุฅูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
2. ุงูุชุญ Console
3. ุดุงูุฏ ุงูุจูุงูุงุช ุงููุญููุธุฉ:

```
๐พ Saving user with permissions: ["delivery-orders", ...]
๐ฆ User data to save: {username: "...", permissions: [...]}
```

4. ุฅุฐุง ูู ุชุธูุฑ `permissions` ูู ุงูุจูุงูุงุช ุงููุญููุธุฉ:
   - โ ุงููุดููุฉ ูู UsersManagement
   - โ ุชุฃูุฏ ูู ุชุญุฏูุฏ ุงูุตูุงุญูุงุช ูุจู ุงูุญูุธ

## ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ:

### 1. ูุณูุงู ุชุญุฏูุฏ ุงูุตูุงุญูุงุช ุนูุฏ ุฅูุดุงุก ุงููุณุชุฎุฏู
- โ ุงูุญู: ุงูุชุญ ุงููุณุชุฎุฏู ููุชุนุฏููุ ุญุฏุฏ ุงูุตูุงุญูุงุชุ ุงุญูุธ

### 2. ุงููุณุชุฎุฏู ูู ููุน "ูุฏูุฑ ูุฑุน" ููู ูุง ุชูุฌุฏ ุตูุงุญูุงุช
- โ ุงูุญู: ูุฏูุฑ ุงููุฑุน ูุญุชุงุฌ ุตูุงุญูุงุช ูุญุฏุฏุฉ (ููุณ ูุซู ูุฏูุฑ ุนุงู)

### 3. ุชุณุฌูู ุงูุฏุฎูู ูุจู ุฅุถุงูุฉ ุงูุตูุงุญูุงุช
- โ ุงูุญู: ุณุฌู ุฎุฑูุฌุ ุฃุถู ุงูุตูุงุญูุงุช ูููุณุชุฎุฏูุ ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู

## ูุนูููุงุช ูููุฉ:

### ุฃููุงุน ุงููุณุชุฎุฏููู:
1. **ูุฏูุฑ ุนุงู**: ูู ุตูุงุญูุฉ ุงููุตูู ููู ุงูุตูุญุงุช ุชููุงุฆูุงู (ูุง ูุญุชุงุฌ ุชุญุฏูุฏ ุตูุงุญูุงุช)
2. **ูุฏูุฑ ูุฑุน**: ูุญุชุงุฌ ุตูุงุญูุงุช ูุญุฏุฏุฉ + ุชุญุฏูุฏ ุงููุฑุน
3. **ูุฏูุฑ ูุณุชูุฏุน**: ูุญุชุงุฌ ุตูุงุญูุงุช ูุญุฏุฏุฉ + ุชุญุฏูุฏ ุงููุณุชูุฏุน

### ุงูุตูุงุญูุงุช ุงููุชุงุญุฉ:
- `governorates` - ุฅุฏุงุฑุฉ ุงููุญุงูุธุงุช
- `regions` - ุฅุฏุงุฑุฉ ุงูููุงุทู
- `districts` - ุฅุฏุงุฑุฉ ุงูุฃุญูุงุก
- `drivers` - ุฅุฏุงุฑุฉ ุงูุณุงุฆููู
- `branch-status` - ุญุงูุฉ ุงููุฑุน
- `delivery-warehouses` - ูุณุชูุฏุนุงุช ุงูุชูุตูู
- `link-branches` - ุฑุจุท ุงููุฑูุน
- `delivery-settings` - ุฅุนุฏุงุฏุงุช ุงูุชูุตูู
- `users` - ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- `delivery-orders` - ุงูุทูุจุงุช
- `confirm-orders` - ุชุฃููุฏ ุงูุทูุจุงุช
- `completed-orders` - ุงูุทูุจุงุช ุงูููุชููุฉ
- `archived-orders` - ุงูุทูุจุงุช ุงููุคุฑุดูุฉ
- `comprehensive-reports` - ุงูุชูุงุฑูุฑ ุงูุดุงููุฉ

---
**ูุตูุญุฉ**: ุงุณุชุฎุฏู console.log ูู ูู ุฎุทูุฉ ูุชุชุจุน ุงููุดููุฉ ุจุฏูุฉ!
