# نظام إعدادات الضرائب - ERP90

## الميزات المضافة

تم تطبيق نفس منطق حسابات المبيعات لإعدادات الضرائب، حيث يتم:

### 1. إضافة إعداد ضريبة جديد
- عند إضافة إعداد ضريبة جديد، يتم إنشاء حساب فرعي تلقائياً متفرع من الحساب الأب
- يتم إنشاء كود حساب تلقائي منطقي للحساب الفرعي
- يتم ربط إعداد الضريبة بالحساب الفرعي المُنشأ

### 2. البيانات المطلوبة
- **اسم الحساب (عربي)**: الاسم العربي لإعداد الضريبة
- **اسم الحساب (إنجليزي)**: الاسم الإنجليزي لإعداد الضريبة  
- **الفرع**: اختيار الفرع المسؤول عن هذا الإعداد
- **الحساب الأب**: الحساب الرئيسي الذي سيتفرع منه الحساب الفرعي
- **النسبة (%)**: نسبة الضريبة (من 0 إلى 100)

### 3. العمليات المتاحة
- **إضافة**: إنشاء إعداد ضريبة جديد مع حساب فرعي
- **عرض**: قائمة بجميع إعدادات الضرائب مع أكواد الحسابات الفرعية
- **حذف**: حذف إعداد الضريبة والحساب الفرعي معاً

### 4. الملفات المتأثرة
- `src/services/taxSettingsService.ts` - خدمة إدارة إعدادات الضرائب
- `src/pages/management/AddTaxSetting.tsx` - صفحة إضافة إعداد ضريبة
- `src/pages/management/TaxSettings.tsx` - صفحة عرض إعدادات الضرائب

### 5. قاعدة البيانات
- **مجموعة**: `taxSettings`
- **الحقول**: nameAr, nameEn, branch, parentAccount, percent, subAccountId, subAccountCode, fiscalYear

## مثال على الاستخدام

1. اذهب إلى "إدارة المبيعات" > "إعدادات الضرائب"
2. اضغط على "إضافة إعداد ضريبة"
3. املأ البيانات المطلوبة
4. اضغط "حفظ الإعداد"
5. سيتم إنشاء الحساب الفرعي تلقائياً مع كود منطقي

## الربط مع النظام المحاسبي

- يتم إنشاء حساب فرعي في شجرة الحسابات تلقائياً
- يتم استخدام دالة `createSubAccount` من `accountsService.ts`
- يتم ضمان التسلسل المنطقي لأكواد الحسابات
- يتم ربط الإعداد بالفرع ومركز التكلفة

## التحديثات المستقبلية

يمكن إضافة:
- تعديل إعدادات الضرائب
- البحث والفلترة
- تصدير البيانات
- ربط إعدادات الضرائب بالفواتير تلقائياً
