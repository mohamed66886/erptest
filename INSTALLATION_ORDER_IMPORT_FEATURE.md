# ููุฒุฉ ุงุณุชูุฑุงุฏ ุจูุงูุงุช ุทูุจุงุช ุงูุชูุตูู ุฅูู ุทูุจุงุช ุงูุชุฑููุจ

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุฅุถุงูุฉ ููุฒุฉ ุฌุฏูุฏุฉ ูู ุตูุญุฉ **ุฅุถุงูุฉ ุทูุจ ุชุฑููุจ ุฌุฏูุฏ** ุชุชูุญ ุงุณุชูุฑุงุฏ ุจูุงูุงุช ุงูุทูุจุงุช ุงูููุชููุฉ ุฃู ุงููุคุฑุดูุฉ ุงูุชู ุชุชุทูุจ ุชุฑููุจ ูุจุงุดุฑุฉ ุฅูู ุงููููุฐุฌ.

## ุงููููุน
๐ ุงููุณุงุฑ: `/installation/add-order`
๐ ุงูููู: `src/pages/installation/add-order.tsx`

## ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ุฒุฑ ุงูุงุณุชูุฑุงุฏ ุงูุฐูู
- **ุงููููุน**: ุจุฌูุงุฑ ุญูู "ุฑูู ุงููุณุชูุฏ"
- **ุงูุฃููููุฉ**: `ImportOutlined` ุจุงูููู ุงูุฃุฎุถุฑ
- **ุงูุฅุดุนุงุฑ**: Badge ูุนุฑุถ ุนุฏุฏ ุงูุทูุจุงุช ุงููุชุงุญุฉ ููุงุณุชูุฑุงุฏ
- **ุงูููู**: ุฃุฎุถุฑ (`#059669`) ููุฅุดุงุฑุฉ ุฅูู ุนูููุฉ ุฅูุฌุงุจูุฉ

### 2. ุงููุงูุฐุฉ ุงูููุจุซูุฉ (Modal)
#### ุงูุนููุงู
- ุฃููููุฉ ุงุณุชูุฑุงุฏ ุฎุถุฑุงุก
- ุนููุงู: "ุงุณุชูุฑุงุฏ ูู ุทูุจุงุช ุงูุชูุตูู ุงูููุชููุฉ"
- Badge ูุนุฑุถ ุนุฏุฏ ุงูุทูุจุงุช ุงููุชุงุญุฉ

#### ุงูุฑุณุงุฆู ุงูุชูุถูุญูุฉ
```
โจ ุงุฎุชุฑ ุทูุจ ุชูุตูู ููุชูู ุฃู ูุคุฑุดู ูุญุชุงุฌ ุชุฑููุจ ูุงุณุชูุฑุงุฏ ุจูุงูุงุชู ุฅูู ูููุฐุฌ ุฅุถุงูุฉ ุทูุจ ุงูุชุฑููุจ
๐ก ุณูุชู ููู: ุฑูู ุงููุงุชูุฑุฉุ ุงููุฑุนุ ุงุณู ุงูุนูููุ ุฑูู ุงููุงุชูุ ูุงูุนููุงู ุงููุงูู
```

### 3. ุฌุฏูู ุงูุทูุจุงุช ุงููุชุงุญุฉ
ูุนุฑุถ ุงูุฌุฏูู ุงูุฃุนูุฏุฉ ุงูุชุงููุฉ:

| ุงูุนููุฏ | ุงููุตู | ุงูุนุฑุถ |
|--------|-------|------|
| # | ุงูุชุฑุชูุจ | 50px |
| ุฑูู ุงููุงุชูุฑุฉ | ุฑูู ุงููุงุชูุฑุฉ ุงููุงูู (ุจุฎุท ุฃุฒุฑู ุนุฑูุถ) | 180px |
| ุงููุฑุน | ุงุณู ุงููุฑุน | 120px |
| ุงุณู ุงูุนููู | ุงุณู ุงูุนููู | 150px |
| ุฑูู ุงููุงุชู | ุฑูู ูุงุชู ุงูุนููู | 120px |
| ุงูุนููุงู | ุงูุญู - ุงูููุทูุฉ - ุงููุญุงูุธุฉ | 200px |
| ุงูุญุงูุฉ | ููุชูู ุฃู ูุคุฑุดู | 100px |
| ุงูุชุงุฑูุฎ | ุชุงุฑูุฎ ุงูุฅููุงู/ุงูุฃุฑุดูุฉ | 120px |
| ุงูุฅุฌุฑุงุก | ุฒุฑ ุงุณุชูุฑุงุฏ | 120px |

### 4. ูุนุงููุฑ ุงูููุชุฑุฉ
ูุชู ุนุฑุถ ุงูุทูุจุงุช ุงูุชู ุชุณุชููู ุงูุดุฑูุท ุงูุชุงููุฉ:
- โ ุงูุญุงูุฉ: `ููุชูู` ุฃู `ูุคุฑุดู`
- โ ูุชุทูุจ ุชุฑููุจ: `requiresInstallation === true`
- โ ูู ูุชู ุงุณุชูุฑุงุฏู ูุณุจูุงู ูู ุงูุฌูุณุฉ ุงูุญุงููุฉ

### 5. ุงูุจูุงูุงุช ุงููุณุชูุฑุฏุฉ
ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ "ุงุณุชูุฑุงุฏ"ุ ูุชู ููู ุงูุจูุงูุงุช ุงูุชุงููุฉ:

#### ุจูุงูุงุช ุฃุณุงุณูุฉ
- **ุฑูู ุงููุณุชูุฏ**: ูุชู ููุคู ุจุฑูู ุงููุงุชูุฑุฉ ุงููุงููุฉ (`fullInvoiceNumber`)
- **ุงูุฌูุฉ ุงููุณุคููุฉ (ุงููุฑุน)**: ุงุณู ุงููุฑุน (`branchName`)

#### ุจูุงูุงุช ุงูุนููู
- **ุงุณู ุงูุนููู**: `customerName`
- **ุฑูู ุงููุงุชู**: `customerPhone`

#### ุจูุงูุงุช ุงูุนููุงู
ูุชู ุงุณุชูุฑุงุฏ ุงูุนููุงู ุจุทุฑููุชูู:

##### ุฃ) ุฅุฐุง ูุงูุช ูุนุฑูุงุช ุงูุนููุงู ูุชููุฑุฉ:
```typescript
districtId โ setDistrictId()
regionId โ setRegionId()
governorateId โ setGovernorateId()
```

##### ุจ) ุฅุฐุง ูุงูุช ุฃุณูุงุก ุงูุนููุงู ููุท ูุชููุฑุฉ:
- ุงูุจุญุซ ุนู ุงูุญู ุจุงูุงุณู (`districtName`)
- ูุทุงุจูุชู ูุน ูุงุนุฏุฉ ุจูุงูุงุช ุงูุฃุญูุงุก
- ุงุณุชูุฑุงุฏ ุงููุนุฑู ุงููุทุงุจู ุชููุงุฆูุงู

### 6. ุฅุฎูุงุก ุงูุทูุจุงุช ุงููุณุชูุฑุฏุฉ
- ูุชู ุฅุถุงูุฉ ูุนุฑู ุงูุทูุจ (`order.id`) ุฅูู ูุงุฆูุฉ `importedOrderIds`
- ูุฎุชูู ุงูุทูุจ ููุฑุงู ูู ุงูุฌุฏูู ุจุนุฏ ุงูุงุณุชูุฑุงุฏ
- ูุชู ุชุญุฏูุซ ุนุฏุงุฏ Badge ุชููุงุฆูุงู
- ุงูุฅุฎูุงุก ูุณุชูุฑ ุทูุงู ุงูุฌูุณุฉ ุงูุญุงููุฉ (ุญุชู ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ)

### 7. ุงูุฅุดุนุงุฑุงุช
#### ุงุณุชูุฑุงุฏ ูุงุฌุญ (ุฌููุน ุงูุจูุงูุงุช):
```
โ ุชู ุงุณุชูุฑุงุฏ ุจูุงูุงุช ุงูุทูุจ ุจูุฌุงุญ: [ุฑูู ุงููุงุชูุฑุฉ]
```

#### ุงุณุชูุฑุงุฏ ุฌุฒุฆู (ุจุฏูู ุนููุงู):
```
โ๏ธ ุชู ุงุณุชูุฑุงุฏ ุจูุงูุงุช ุงูุทูุจ: [ุฑูู ุงููุงุชูุฑุฉ] - ูุฑุฌู ุชุญุฏูุฏ ุงูุนููุงู ูุฏููุงู
```

## ุงูููุฏ ุงูุจุฑูุฌู

### ุงููุงุฌูุงุช (Interfaces)
```typescript
interface DeliveryOrder {
  id: string;
  fullInvoiceNumber: string;
  branchName: string;
  customerName: string;
  customerPhone: string;
  districtId?: string;
  districtName: string;
  regionId?: string;
  regionName: string;
  governorateId?: string;
  governorateName: string;
  status: string;
  requiresInstallation: boolean;
  deliveryDate?: string;
  completedAt?: string;
  archivedAt?: string;
}
```

### ุงูุญุงูุงุช (States)
```typescript
const [importModalVisible, setImportModalVisible] = useState(false);
const [deliveryOrders, setDeliveryOrders] = useState<DeliveryOrder[]>([]);
const [loadingOrders, setLoadingOrders] = useState(false);
const [importedOrderIds, setImportedOrderIds] = useState<string[]>([]);
```

### ุงูุฏูุงู ุงูุฑุฆูุณูุฉ

#### 1. ุฌูุจ ุงูุทูุจุงุช
```typescript
const fetchDeliveryOrders = async () => {
  setLoadingOrders(true);
  try {
    const ordersSnapshot = await getDocs(collection(db, 'delivery_orders'));
    const ordersData = ordersSnapshot.docs
      .map(doc => ({ id: doc.id, ...doc.data() })) as DeliveryOrder[];
    
    const filteredOrders = ordersData.filter(order => 
      (order.status === 'ููุชูู' || order.status === 'ูุคุฑุดู') &&
      order.requiresInstallation === true &&
      !importedOrderIds.includes(order.id)
    );
    
    setDeliveryOrders(filteredOrders);
  } catch (error) {
    console.error('Error fetching delivery orders:', error);
    message.error('ุญุฏุซ ุฎุทุฃ ูู ุฌูุจ ุทูุจุงุช ุงูุชูุตูู');
  } finally {
    setLoadingOrders(false);
  }
};
```

#### 2. ุงุณุชูุฑุงุฏ ุจูุงูุงุช ุงูุทูุจ
```typescript
const handleImportOrder = (order: DeliveryOrder) => {
  // ููู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
  setDocumentNumber(order.fullInvoiceNumber);
  setResponsibleEntity(order.branchName);
  setCustomerName(order.customerName);
  setPhone(order.customerPhone);
  
  let addressImported = false;
  
  // ููู ุจูุงูุงุช ุงูุนููุงู
  if (order.districtId) {
    setDistrictId(order.districtId);
    addressImported = true;
  } else if (order.districtName) {
    const district = districts.find(d => 
      (d.nameAr === order.districtName || d.name === order.districtName)
    );
    if (district) {
      setDistrictId(district.id);
      addressImported = true;
    }
  }
  
  if (order.regionId) setRegionId(order.regionId);
  if (order.governorateId) setGovernorateId(order.governorateId);
  
  // ุฅุถุงูุฉ ูููุงุฆูุฉ ุงููุณุชูุฑุฏุฉ
  setImportedOrderIds([...importedOrderIds, order.id]);
  
  setImportModalVisible(false);
  
  // ุฅุธูุงุฑ ุฑุณุงูุฉ ุงููุฌุงุญ/ุงูุชุญุฐูุฑ
  if (addressImported) {
    message.success(`ุชู ุงุณุชูุฑุงุฏ ุจูุงูุงุช ุงูุทูุจ ุจูุฌุงุญ: ${order.fullInvoiceNumber}`);
  } else {
    message.warning(`ุชู ุงุณุชูุฑุงุฏ ุจูุงูุงุช ุงูุทูุจ: ${order.fullInvoiceNumber} - ูุฑุฌู ุชุญุฏูุฏ ุงูุนููุงู ูุฏููุงู`);
  }
};
```

## ุงูุชุญููู ุงูุฃููู
ูุชู ุชุญููู ุงูุทูุจุงุช ุชููุงุฆูุงู ุนูุฏ ุชุญููู ุงูุตูุญุฉ:
```typescript
useEffect(() => {
  // ... ููุฏ ุขุฎุฑ
  fetchDeliveryOrders(); // ุชุญููู ุทูุจุงุช ุงูุชูุตูู ุนูุฏ ุชุญููู ุงูุตูุญุฉ
  // eslint-disable-next-line react-hooks/exhaustive-deps
}, []);
```

## ุงูุชุตููู ูุงูุฃููููุงุช

### ุฒุฑ ุงูุงุณุชูุฑุงุฏ
- **ุงูููู**: ุฃุฎุถุฑ (`bg-green-600 hover:bg-green-700`)
- **ุงูุงุฑุชูุงุน**: 48px
- **ุญุฌู ุงูุฎุท**: 16px
- **ุงูุฃููููุฉ**: `ImportOutlined`

### Badge ุงูุฅุดุนุงุฑ
- **ุงูููู ุงูุฎููู**: `#059669` (ุฃุฎุถุฑ)
- **ูุธูุฑ ุญุชู ุนูุฏ ุงูุนุฏุฏ ุตูุฑ**: `showZero={true}`

### ุงูุฌุฏูู
- **ุนุฑุถ ุงูุตูุญุฉ**: 10 ุทูุจุงุช
- **ุฎูุงุฑุงุช ุงูุญุฌู**: 10ุ 20ุ 30
- **ุงูุชูุฑูุฑ ุงูุฃููู**: 1000px
- **ุงูุฑุณุงูุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ุจูุงูุงุช**: "ูุง ุชูุฌุฏ ุทูุจุงุช ุชูุตูู ูุชุงุญุฉ ููุงุณุชูุฑุงุฏ"

## ุงูุณููู ุงูุชูุงุนูู

### ุนูุฏ ูุชุญ Modal:
1. ุนุฑุถ ุงููุงูุฐุฉ ุงูููุจุซูุฉ
2. ุชุญุฏูุซ ูุงุฆูุฉ ุงูุทูุจุงุช (`fetchDeliveryOrders()`)
3. ุนุฑุถ ุนุฏุงุฏ ุงูุทูุจุงุช ุงููุชุงุญุฉ

### ุนูุฏ ุงุฎุชูุงุฑ ุทูุจ:
1. ููู ุฌููุน ุงูุจูุงูุงุช ุฅูู ุงููููุฐุฌ
2. ุฅุถุงูุฉ ุงูุทูุจ ููุงุฆูุฉ ุงููุณุชูุฑุฏุฉ
3. ุฅุฎูุงุก ุงูุทูุจ ูู ุงูุฌุฏูู
4. ุชุญุฏูุซ ุนุฏุงุฏ Badge
5. ุฅุบูุงู Modal
6. ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ

### ุนูุฏ ุฅุบูุงู Modal:
- ุงูุทูุจุงุช ุงููุณุชูุฑุฏุฉ ุชุจูู ูุฎููุฉ
- ุงูุจูุงูุงุช ุงููุณุชูุฑุฏุฉ ุชุจูู ูู ุงููููุฐุฌ

## ุงูุฃูุงู ูุงูุชุญูู

### ุงูุชุญูู ูู ุงูุจูุงูุงุช
- โ ุงูุชุฃูุฏ ูู ูุฌูุฏ ุฑูู ุงููุงุชูุฑุฉ
- โ ุงูุชุฃูุฏ ูู ูุฌูุฏ ุงุณู ุงููุฑุน
- โ ุงูุชุญูู ูู ุตุญุฉ ุฑูู ุงููุงุชู
- โ๏ธ ุชูุจูู ุนูุฏ ุนุฏู ูุฌูุฏ ุจูุงูุงุช ุงูุนููุงู

### ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
```typescript
try {
  // ุฌูุจ ุงูุทูุจุงุช
} catch (error) {
  console.error('Error fetching delivery orders:', error);
  message.error('ุญุฏุซ ุฎุทุฃ ูู ุฌูุจ ุทูุจุงุช ุงูุชูุตูู');
}
```

## ุงูุชูุงูู
- โ React 18+
- โ Ant Design 5.x
- โ Firebase Firestore 10.x
- โ TypeScript 5.x
- โ Tailwind CSS 3.x

## ุงูุฃุฏุงุก
- ุชุญููู ูุณุจู ููุทูุจุงุช ุนูุฏ ุชุญููู ุงูุตูุญุฉ
- ููุชุฑุฉ ุณุฑูุนุฉ ุจุงุณุชุฎุฏุงู `Array.filter()`
- ุชุญุฏูุซ ุชูุงุนูู ููุนุฏุงุฏ
- ุฅุฎูุงุก ููุฑู ููุทูุจุงุช ุงููุณุชูุฑุฏุฉ

## ุงูุงุณุชุฎุฏุงู

### ูููุณุชุฎุฏู ุงูููุงุฆู:
1. ุงูุชุญ ุตูุญุฉ "ุฅุถุงูุฉ ุทูุจ ุชุฑููุจ ุฌุฏูุฏ"
2. ุงูุธุฑ ุฅูู ุญูู "ุฑูู ุงููุณุชูุฏ"
3. ุงุถุบุท ุนูู ุฒุฑ "ุงุณุชูุฑุงุฏ ูู ุทูุจ ุชูุตูู" (ุณุชุฑู ุนุฏุฏ ุงูุทูุจุงุช ุงููุชุงุญุฉ)
4. ุงุฎุชุฑ ุงูุทูุจ ุงููุทููุจ ูู ุงูุฌุฏูู
5. ุงุถุบุท ุนูู ุฒุฑ "ุงุณุชูุฑุงุฏ"
6. ุณุชุฌุฏ ุงูุจูุงูุงุช ูุฏ ููุฃุช ุชููุงุฆูุงู ูู ุงููููุฐุฌ

### ูููุทูุฑ:
```typescript
// ุงุณุชูุฑุงุฏ ุงูุฃููููุงุช
import { ImportOutlined } from '@ant-design/icons';
import { Modal, Table, Badge } from 'antd';

// ุฅุถุงูุฉ ุงููุงุฌูุฉ
interface DeliveryOrder { /* ... */ }

// ุฅุถุงูุฉ ุงูุญุงูุงุช
const [importModalVisible, setImportModalVisible] = useState(false);
const [deliveryOrders, setDeliveryOrders] = useState<DeliveryOrder[]>([]);
const [importedOrderIds, setImportedOrderIds] = useState<string[]>([]);

// ุฌูุจ ูุนุฑุถ ุงูุทูุจุงุช
fetchDeliveryOrders();
```

## ุงูุตูุงูุฉ ูุงูุชุทููุฑ ุงููุณุชูุจูู

### ุชุญุณููุงุช ููุชุฑุญุฉ:
- [ ] ุฅุถุงูุฉ ููุชุฑุฉ ูุชูุฏูุฉ (ุญุณุจ ุงูุชุงุฑูุฎุ ุงููุฑุนุ ุฅูุฎ)
- [ ] ุญูุธ ุงูุทูุจุงุช ุงููุณุชูุฑุฏุฉ ูู LocalStorage
- [ ] ุฅุถุงูุฉ ูุนุงููุฉ ุณุฑูุนุฉ ูุชูุงุตูู ุงูุทูุจ
- [ ] ุชุตุฏูุฑ ูุงุฆูุฉ ุงูุทูุจุงุช ุฅูู Excel
- [ ] ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช ุนู ุงูุทูุจุงุช ุงููุณุชูุฑุฏุฉ

### ุงูุตูุงูุฉ:
- ูุฑุงุฌุนุฉ ุงูููุงุชุฑ ุนูุฏ ุชุบููุฑ ุญุงูุงุช ุงูุทูุจุงุช
- ุชุญุฏูุซ ุงููุงุฌูุงุช ุนูุฏ ุฅุถุงูุฉ ุญููู ุฌุฏูุฏุฉ
- ุงุฎุชุจุงุฑ ุงูุชูุงูู ูุน ุชุญุฏูุซุงุช Firebase

## ุงูููุงุญุธุงุช ุงููุงูุฉ
1. โ๏ธ ุงูุทูุจุงุช ุงููุณุชูุฑุฏุฉ ุชุฎุชูู ููุท ุฎูุงู ุงูุฌูุณุฉ ุงูุญุงููุฉ
2. ๐พ ูุง ูุชู ุญูุธ ูุงุฆูุฉ ุงููุณุชูุฑุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ๐ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ูุนูุฏ ุฌููุน ุงูุทูุจุงุช
4. โจ ูููู ุงุณุชูุฑุงุฏ ุทูุจ ูุงุญุฏ ููุท ูู ูู ูุฑุฉ
5. ๐ ูุฌุจ ุญูุธ ุทูุจ ุงูุชุฑููุจ ุจุนุฏ ุงูุงุณุชูุฑุงุฏ

## ุงููุฑุงุฌุน
- [Ant Design - Modal](https://ant.design/components/modal)
- [Ant Design - Table](https://ant.design/components/table)
- [Ant Design - Badge](https://ant.design/components/badge)
- [Firebase Firestore - Query Data](https://firebase.google.com/docs/firestore/query-data/queries)

---

**ุขุฎุฑ ุชุญุฏูุซ**: ููููุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ**: 1.0.0  
**ุงููุทูุฑ**: ERP90 Development Team
