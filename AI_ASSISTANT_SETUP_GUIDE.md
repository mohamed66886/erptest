# دليل إعداد المساعد الذكي الحقيقي - ERP90

## نظرة عامة

تم تطوير المساعد الذكي في ERP90 ليدعم الذكاء الاصطناعي الحقيقي باستخدام OpenAI API. يمكن للمساعد الآن:

- الإجابة على الأسئلة المعقدة حول النظام
- تقديم شروحات مفصلة ومخصصة
- التعلم من السياق والمحادثات السابقة
- تقديم حلول ديناميكية بناءً على احتياجاتك

## خطوات الإعداد

### 1. الحصول على مفتاح OpenAI API

1. اذهب إلى [OpenAI Platform](https://platform.openai.com/)
2. أنشئ حساباً جديداً أو سجل الدخول
3. اذهب إلى قسم "API Keys"
4. انقر على "Create new secret key"
5. انسخ المفتاح واحفظه بأمان

### 2. إعداد متغيرات البيئة

1. أنشئ ملف `.env` في المجلد الرئيسي للمشروع إذا لم يكن موجوداً
2. أضف السطر التالي:
```bash
VITE_OPENAI_API_KEY=your_actual_api_key_here
```

3. استبدل `your_actual_api_key_here` بالمفتاح الذي حصلت عليه
4. احفظ الملف

### 3. إعادة تشغيل التطبيق

```bash
npm run dev
```

## استخدام المساعد الذكي

### الميزات الجديدة

1. **مؤشر الحالة**: يظهر ما إذا كان المساعد متصلاً بالذكاء الاصطناعي أم لا
2. **إعدادات AI**: زر جديد لفحص حالة الاتصال واختباره
3. **معالجة الأخطاء**: في حالة فشل الاتصال، يتحول تلقائياً للوضع المحلي
4. **السياق الذكي**: يتذكر المحادثة السابقة لتقديم ردود أفضل

### واجهة المستخدم

- **مؤشر أخضر**: متصل بالذكاء الاصطناعي
- **مؤشر أحمر**: وضع محلي (مشاكل في الاتصال)
- **مؤشر أصفر**: يحتاج إعداد API

## الأمان والخصوصية

### أفضل الممارسات

1. **لا تشارك مفتاح API**: احتفظ به سرياً
2. **استخدم .env**: لا تضع المفتاح مباشرة في الكود
3. **راقب الاستخدام**: تابع استهلاكك في لوحة OpenAI
4. **حدد الصلاحيات**: استخدم مفاتيح بصلاحيات محددة

### إعدادات الأمان في .env

```bash
# مفتاح OpenAI الرئيسي
VITE_OPENAI_API_KEY=sk-...

# إعدادات إضافية (اختيارية)
VITE_AI_SERVICE=openai
VITE_AI_MODEL=gpt-3.5-turbo
VITE_AI_MAX_TOKENS=1000
```

## استكشاف الأخطاء وإصلاحها

### المشاكل الشائعة

#### 1. "مفتاح API غير محدد"
- **الحل**: تأكد من وجود المفتاح في ملف .env
- **فحص**: افتح .env وتأكد من السطر `VITE_OPENAI_API_KEY=...`

#### 2. "مفتاح API غير صحيح"
- **الحل**: تحقق من صحة المفتاح في لوحة OpenAI
- **فحص**: تأكد من أن المفتاح لم ينته صلاحيته

#### 3. "تم تجاوز حد الطلبات"
- **الحل**: انتظر قليلاً أو ارفع حد الاستخدام
- **فحص**: راجع استهلاكك في لوحة OpenAI

#### 4. "خطأ في الاتصال"
- **الحل**: تحقق من اتصال الإنترنت
- **البديل**: المساعد سيعمل في الوضع المحلي

### اختبار الإعداد

1. افتح المساعد الذكي
2. انقر على أيقونة الإعدادات (⚙️)
3. انقر على "اختبار الاتصال"
4. يجب أن تظهر رسالة نجاح

## التكاليف والاستهلاك

### تقدير التكاليف

- **GPT-3.5-turbo**: $0.002 لكل 1K token
- **متوسط المحادثة**: 100-500 token
- **التكلفة المتوقعة**: $0.0002-$0.001 لكل رسالة

### تحسين الاستهلاك

1. **استخدم GPT-3.5** بدلاً من GPT-4 للاستخدام العادي
2. **قلل من طول الرسائل** غير الضرورية
3. **راقب الاستهلاك** شهرياً في لوحة OpenAI

## الميزات المتقدمة

### إضافة خدمات AI أخرى

يمكن إضافة دعم لخدمات أخرى مثل:

- **Google Gemini**: للحصول على نتائج متنوعة
- **Anthropic Claude**: للمحادثات الطويلة
- **Azure OpenAI**: للاستخدام المؤسسي

### تخصيص شخصية المساعد

في ملف `aiService.ts`، يمكنك تعديل الرسالة النظامية لتخصيص:

- **أسلوب الرد**: رسمي أم ودود
- **التخصص**: محاسبة، مبيعات، مخازن
- **اللغة**: العربية فقط أم متعددة

## الدعم الفني

### إذا واجهت مشاكل:

1. تحقق من ملف `.env`
2. افحص console في المتصفح للأخطاء
3. جرب إعادة تشغيل التطبيق
4. استخدم أداة "اختبار الاتصال" في الإعدادات

### معلومات مفيدة للدعم:

- إصدار Node.js
- محتوى ملف .env (بدون المفتاح)
- رسائل الأخطاء من console
- حالة الشبكة والاتصال

---

**تمت كتابة هذا الدليل في: نوفمبر 2024**
**إصدار المساعد الذكي: 2.0 مع دعم OpenAI**
